{"payload":{"allShortcutsEnabled":false,"fileTree":{"":{"items":[{"name":".github","path":".github","contentType":"directory"},{"name":"img","path":"img","contentType":"directory"},{"name":"src","path":"src","contentType":"directory"},{"name":".gitignore","path":".gitignore","contentType":"file"},{"name":"CONTRIBUTING.md","path":"CONTRIBUTING.md","contentType":"file"},{"name":"README.md","path":"README.md","contentType":"file"},{"name":"RESOURCES.md","path":"RESOURCES.md","contentType":"file"},{"name":"TODO.md","path":"TODO.md","contentType":"file"},{"name":"requirements.txt","path":"requirements.txt","contentType":"file"},{"name":"setup.py","path":"setup.py","contentType":"file"},{"name":"webui.bat","path":"webui.bat","contentType":"file"},{"name":"webui.sh","path":"webui.sh","contentType":"file"}],"totalCount":12}},"fileTreeProcessingTime":2.776736,"foldersToFetch":[],"reducedMotionEnabled":null,"repo":{"id":684171643,"defaultBranch":"master","name":"thumb","ownerLogin":"hammer-mt","currentUserCanPush":false,"isFork":false,"isEmpty":false,"createdAt":"2023-08-28T15:48:03.000Z","ownerAvatar":"https://avatars.githubusercontent.com/u/5264596?v=4","public":true,"private":false,"isOrgOwned":false},"symbolsExpanded":false,"treeExpanded":true,"refInfo":{"name":"master","listCacheKey":"v0:1694468665.0","canEdit":false,"refType":"branch","currentOid":"dac3a6abb48aaa8edd4c50fe2d3d4fd89419bd81"},"path":"README.md","currentUser":null,"blob":{"rawLines":null,"stylingDirectives":null,"csv":null,"csvError":null,"dependabotInfo":{"showConfigurationBanner":false,"configFilePath":null,"networkDependabotPath":"/hammer-mt/thumb/network/updates","dismissConfigurationNoticePath":"/settings/dismiss-notice/dependabot_configuration_notice","configurationNoticeDismissed":null,"repoAlertsPath":"/hammer-mt/thumb/security/dependabot","repoSecurityAndAnalysisPath":"/hammer-mt/thumb/settings/security_analysis","repoOwnerIsOrg":false,"currentUserCanAdminRepo":false},"displayName":"README.md","displayUrl":"https://github.com/hammer-mt/thumb/blob/master/README.md?raw=true","headerInfo":{"blobSize":"10.8 KB","deleteInfo":{"deleteTooltip":"You must be signed in to make or propose changes"},"editInfo":{"editTooltip":"You must be signed in to make or propose changes"},"ghDesktopPath":"https://desktop.github.com","gitLfsPath":null,"onBranch":true,"shortPath":"054a9b9","siteNavLoginPath":"/login?return_to=https%3A%2F%2Fgithub.com%2Fhammer-mt%2Fthumb%2Fblob%2Fmaster%2FREADME.md","isCSV":false,"isRichtext":true,"toc":[{"level":1,"text":"thumb","anchor":"thumb","htmlText":"thumb"},{"level":2,"text":"Quick start","anchor":"quick-start","htmlText":"Quick start"},{"level":3,"text":"1. Install the library","anchor":"1-install-the-library","htmlText":"1. Install the library"},{"level":3,"text":"2. Set up a test","anchor":"2-set-up-a-test","htmlText":"2. Set up a test"},{"level":3,"text":"3. Rate the responses","anchor":"3-rate-the-responses","htmlText":"3. Rate the responses"},{"level":2,"text":"Functionality","anchor":"functionality","htmlText":"Functionality"},{"level":3,"text":"Test cases","anchor":"test-cases","htmlText":"Test cases"},{"level":3,"text":"Model testing","anchor":"model-testing","htmlText":"Model testing"},{"level":3,"text":"System messages","anchor":"system-messages","htmlText":"System messages"},{"level":3,"text":"Evaluation report","anchor":"evaluation-report","htmlText":"Evaluation report"},{"level":3,"text":"Parameters","anchor":"parameters","htmlText":"Parameters"},{"level":4,"text":"Required","anchor":"required","htmlText":"Required"},{"level":4,"text":"Optional","anchor":"optional","htmlText":"Optional"},{"level":3,"text":"Loading and adding","anchor":"loading-and-adding","htmlText":"Loading and adding"},{"level":2,"text":"Thumb Testing üëçüß™","anchor":"thumb-testing-","htmlText":"Thumb Testing üëçüß™"},{"level":2,"text":"Contributors","anchor":"contributors","htmlText":"Contributors"}],"lineInfo":{"truncatedLoc":"249","truncatedSloc":"169"},"mode":"file"},"image":false,"isCodeownersFile":null,"isPlain":false,"isValidLegacyIssueTemplate":false,"issueTemplateHelpUrl":"https://docs.github.com/articles/about-issue-and-pull-request-templates","issueTemplate":null,"discussionTemplate":null,"language":"Markdown","languageID":222,"large":false,"loggedIn":false,"newDiscussionPath":"/hammer-mt/thumb/discussions/new","newIssuePath":"/hammer-mt/thumb/issues/new","planSupportInfo":{"repoIsFork":null,"repoOwnedByCurrentUser":null,"requestFullPath":"/hammer-mt/thumb/blob/master/README.md","showFreeOrgGatedFeatureMessage":null,"showPlanSupportBanner":null,"upgradeDataAttributes":null,"upgradePath":null},"publishBannersInfo":{"dismissActionNoticePath":"/settings/dismiss-notice/publish_action_from_dockerfile","dismissStackNoticePath":"/settings/dismiss-notice/publish_stack_from_file","releasePath":"/hammer-mt/thumb/releases/new?marketplace=true","showPublishActionBanner":false,"showPublishStackBanner":false},"renderImageOrRaw":false,"richText":"thumb\nA simple prompt testing library for LLMs.\nQuick start\n1. Install the library\n\npip install thumb\n\n2. Set up a test\nimport os\nimport thumb\n\n# Set your API key: https://platform.openai.com/account/api-keys\nos.environ[\"OPENAI_API_KEY\"] = \"YOUR_API_KEY_HERE\"\n\n# set up a prompt templates for the a/b test\nprompt_a = \"tell me a joke\"\nprompt_b = \"tell me a family friendly joke\"\n\n# generate the responses\ntest = thumb.test([prompt_a, prompt_b])\n3. Rate the responses\nEach prompt is run 10 times asynchronously by default, which is around 9x faster than running them sequentially. In Jupyter Notebooks a simple user interface is displayed for blind rating responses (you don't see which prompt generated the response).\n\nOnce all responses have been rated, the following performance statistics are calculated broken down by prompt template:\n\navg_score amount of positive feedback as a percentage of all runs\navg_tokens: how many tokens were used across the prompt and response\navg_cost: an estimate of how much the prompt cost to run on average\n\nA simple report is displayed in the notebook, and the full data is saved to a CSV file thumb/ThumbTest-{TestID}.csv.\n\nFunctionality\nTest cases\nTest cases are when you want to test a prompt template with different input variables. For example, if you want to test a prompt template that includes a variable for a comedian's name, you can set up test cases for different comedians.\n# set up a prompt templates for the a/b test\nprompt_a = \"tell me a joke in the style of {comedian}\"\nprompt_b = \"tell me a family friendly joke in the style of {comedian}\"\n\n# set test cases with different input variables\ncases = [\n  {\"comedian\": \"chris rock\"}, \n  {\"comedian\": \"ricky gervais\"}, \n  {\"comedian\": \"robin williams\"}\n  ]\n\n# generate the responses\ntest = thumb.test([prompt_a, prompt_b], cases)\nEvery test case will be run against every prompt template, so in this example you'll get 6 combinations (3 test cases x 2 prompt templates), which will each run 10 times (60 total calls to OpenAI). Every test case must include a value for each variable in the prompt template.\nPrompts may have multiple variables in each test case. For example, if you want to test a prompt template that includes a variable for a comedian's name and a joke topic, you can set up test cases for different comedians and topics.\n# set up a prompt templates for the a/b test\nprompt_a = \"tell me a joke about {subject} in the style of {comedian}\"\nprompt_b = \"tell me a family friendly joke about {subject} in the style of {comedian}\"\n\n# set test cases with different input variables\ncases = [\n  {\"subject\": \"joe biden\", \"comedian\": \"chris rock\"}, \n  {\"subject\": \"joe biden\", \"comedian\": \"ricky gervais\"}, \n  {\"subject\": \"donald trump\", \"comedian\": \"chris rock\"}, \n  {\"subject\": \"donald trump\", \"comedian\": \"ricky gervais\"}, \n  ]\n\n# generate the responses\ntest = thumb.test([prompt_a, prompt_b], cases)\nEvery case is tested against every prompt, in order to get a fair comparison of the performance of each prompt given the same input data. With 4 test cases and 2 prompts, you'll get 8 combinations (4 test cases x 2 prompt templates), which will each run 10 times (80 total calls to OpenAI).\nModel testing\n# set up a prompt templates for the a/b test\nprompt_a = \"tell me a joke\"\nprompt_b = \"tell me a family friendly joke\"\n\n# generate the responses\ntest = thumb.test([prompt_a, prompt_b], models=[\"gpt-4\", \"gpt-3.5-turbo\"])\nThis will run each prompt against each model, in order to get a fair comparison of the performance of each prompt given the same input data. With 2 prompts and 2 models, you'll get 4 combinations (2 prompts x 2 models), which will each run 10 times (40 total calls to OpenAI).\nSystem messages\n# set up a prompt templates for the a/b test\nsystem_message = \"You are the comedian {comedian}\"\n\nprompt_a = [system_message, \"tell me a funny joke about {subject}\"]\nprompt_b = [system_message, \"tell me a hillarious joke {subject}\"]\n\ncases = [{\"subject\": \"joe biden\", \"comedian\": \"chris rock\"}, \n         {\"subject\": \"donald trump\", \"comedian\": \"chris rock\"}]\n\n# generate the responses\ntest = thumb.test([prompt_a, prompt_b], cases)\nPrompts can be a string or an array of strings. If the prompt is an array, the first string is used as a system message, and the rest of the prompts alternate between Human and Assistant messages ([system, human, ai, human, ai, ...]). This is useful for testing prompts that include a system message, or that are using pre-warming (inserting prior messages into the chat to guide the AI towards desired behavior).\n# set up a prompt templates for the a/b test\nsystem_message = \"You are the comedian {comedian}\"\n\nprompt_a = [system_message, # system\n            \"tell me a funny joke about {subject}\", # human\n            \"Sorry, as an AI language model, I am not capable of humor\", # assistant\n            \"That's fine just try your best\"] # human\nprompt_b = [system_message, # system\n            \"tell me a hillarious joke about {subject}\", # human\n            \"Sorry, as an AI language model, I am not capable of humor\", # assistant\n            \"That's fine just try your best\"] # human\n\ncases = [{\"subject\": \"joe biden\", \"comedian\": \"chris rock\"}, \n         {\"subject\": \"donald trump\", \"comedian\": \"chris rock\"}]\n\n# generate the responses\ntest = thumb.test([prompt_a, prompt_b], cases)\nEvaluation report\nWhen the test completes, you get a full evaluation report, broken down by PID, CID, and model, as well as an overall report broken down by all combinations. If you only test one model or one case, these breakdowns will be dropped. The report shows a key at the bottom to see which ID corresponds to which prompt or case.\n\nParameters\nThe thumb.test function takes the following parameters:\nRequired\n\nprompts: an array of prompts (strings) to be tested\n\nOptional\n\ncases: a dictionary of variables to input into each prompt template (default: None)\nruns: the number of responses to generate per prompt and test case (default: 10)\nmodels: a list of OpenAI models you want to generate responses from (default: [gpt-3.5-turbo])\nasync_generate: a boolean that denotes whether to run async or sequentially (default: True)\n\nIf you have 10 test runs with 2 prompt templates and 3 test cases, that's 10 x 2 x 3 = 60 calls to OpenAI. Be careful: particularly with GPT-4 the costs can add up quickly!\nLangchain tracing to LangSmith is automatically enabled if the LANGCHAIN_API_KEY is set as an environment variable (optional).\nLoading and adding\nthe .test() function returns a ThumbTest object. You can add more prompts or cases to the test, or run it additional times. You can also generate, evaluate and export the test data at any time.\n# set up a prompt templates for the a/b test\nprompt_a = \"tell me a joke\"\nprompt_b = \"tell me a family friendly joke\"\n\n# generate the responses\ntest = thumb.test([prompt_a, prompt_b])\n\n# add more prompts\ntest.add_prompts([\"tell me a knock knock joke\", \"tell me a knock knock joke about {subject}\"])\n\n# add more cases\ntest.add_cases([{\"subject\": \"joe biden\"}, {\"subject\": \"donald trump\"}])\n\n# run each prompt and case 5 more times\ntest.add_runs(5)\n\n# generate the responses\ntest.generate()\n\n# rate the responses\ntest.evaluate()\n\n# export the test data for analysis\ntest.export_to_csv()\nEvery prompt template gets the same input data from every test case, but the prompt does not need to use all of the variables in the test case. As in the example above, the tell me a knock knock joke prompt does not use the subject variable, but it is still generated once (with no variables) for each test case.\nTest data is cached in a local JSON file thumb/.cache/{TestID}.json after every set of runs is generated for a prompt and case combination.\nIf your test is interrupted, or you want to add to it, you can use the thumb.load function to load the test data from the cache.\n# load a previous test\ntest_id = \"abcd1234\" # replace with your test id\ntest = thumb.load(f\"thumb/.cache/{test_id}.json\")\n\n# run each prompt and case 2 more times\ntest.add_runs(2)\n\n# generate the responses\ntest.generate()\n\n# rate the responses\ntest.evaluate()\n\n# export the test data for analysis\ntest.export_to_csv()\nEvery run for each combination of prompt and case is stored in the object (and cache), and therefore calling test.generate() again will not generate any new responses if more prompts, cases, or runs aren't added. Similarly, calling test.evaluate() again will not re-rate the responses you have already rated, and will simply redisplay the results if the test has ended.\nThumb Testing üëçüß™\nThe difference between people just playing around with ChatGPT and those using AI in production is evaluation. LLMs respond non-deterministically, and so it's important to test what results look like when scaled up across a wide range of scenarios. Without an evaluation framework you're left blindly guessing about what's working in your prompts (or not).\nSerious prompt engineers are testing and learning which inputs lead to useful or desired outputs, reliably and at scale. This process is called prompt optimization, and it looks like this:\n\nMetrics ‚Äì Establish how you'll measure the performance of the responses from the AI.\nHypothesis ‚Äì Design one or more prompts that may work, based on the latest research.\nTesting ‚Äì Generate responses for your different prompts against multiple test cases.\nAnalysis ‚Äì Evaluate the performance of your prompts and use them to inform the next test.\n\nThumb testing fills the gap between large scale professional evaluation mechanisms, and blindly prompting through trial and error. If you are transitioning a prompt into a production environment, using thumb to test your prompt can help you catch edge cases, and get early user or team feedback on the results.\nContributors\nThese people are building thumb for fun in their spare time. üëç\n\n\n\n\n  \n    hammer-mtüíª\n  \n\n\n\n\n","renderedFileInfo":null,"shortPath":null,"tabSize":8,"topBannersInfo":{"overridingGlobalFundingFile":false,"globalPreferredFundingPath":null,"repoOwner":"hammer-mt","repoName":"thumb","showInvalidCitationWarning":false,"citationHelpUrl":"https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-repository-on-github/about-citation-files","showDependabotConfigurationBanner":false,"actionsOnboardingTip":null},"truncated":false,"viewable":true,"workflowRedirectUrl":null,"symbols":{"timedOut":false,"notAnalyzed":false,"symbols":[{"name":" thumb","kind":"unknown","identStart":1,"identEnd":7,"extentStart":0,"extentEnd":11072,"fullyQualifiedName":" thumb","identUtf16":{"start":{"lineNumber":0,"utf16Col":1},"end":{"lineNumber":0,"utf16Col":7}},"extentUtf16":{"start":{"lineNumber":0,"utf16Col":0},"end":{"lineNumber":249,"utf16Col":0}}},{"name":" Quick start","kind":"unknown","identStart":54,"identEnd":66,"extentStart":52,"extentEnd":1266,"fullyQualifiedName":" Quick start","identUtf16":{"start":{"lineNumber":4,"utf16Col":2},"end":{"lineNumber":4,"utf16Col":14}},"extentUtf16":{"start":{"lineNumber":4,"utf16Col":0},"end":{"lineNumber":42,"utf16Col":0}}},{"name":" 1. Install the library","kind":"unknown","identStart":71,"identEnd":94,"extentStart":68,"extentEnd":119,"fullyQualifiedName":" 1. Install the library","identUtf16":{"start":{"lineNumber":6,"utf16Col":3},"end":{"lineNumber":6,"utf16Col":26}},"extentUtf16":{"start":{"lineNumber":6,"utf16Col":0},"end":{"lineNumber":10,"utf16Col":0}}},{"name":" 2. Set up a test","kind":"unknown","identStart":122,"identEnd":139,"extentStart":119,"extentEnd":480,"fullyQualifiedName":" 2. Set up a test","identUtf16":{"start":{"lineNumber":10,"utf16Col":3},"end":{"lineNumber":10,"utf16Col":20}},"extentUtf16":{"start":{"lineNumber":10,"utf16Col":0},"end":{"lineNumber":27,"utf16Col":0}}},{"name":" 3. Rate the responses","kind":"unknown","identStart":483,"identEnd":505,"extentStart":480,"extentEnd":1266,"fullyQualifiedName":" 3. Rate the responses","identUtf16":{"start":{"lineNumber":27,"utf16Col":3},"end":{"lineNumber":27,"utf16Col":25}},"extentUtf16":{"start":{"lineNumber":27,"utf16Col":0},"end":{"lineNumber":42,"utf16Col":0}}},{"name":" Functionality","kind":"unknown","identStart":1268,"identEnd":1282,"extentStart":1266,"extentEnd":8932,"fullyQualifiedName":" Functionality","identUtf16":{"start":{"lineNumber":42,"utf16Col":2},"end":{"lineNumber":42,"utf16Col":16}},"extentUtf16":{"start":{"lineNumber":42,"utf16Col":0},"end":{"lineNumber":218,"utf16Col":0}}},{"name":" Test cases","kind":"unknown","identStart":1287,"identEnd":1298,"extentStart":1284,"extentEnd":3348,"fullyQualifiedName":" Test cases","identUtf16":{"start":{"lineNumber":44,"utf16Col":3},"end":{"lineNumber":44,"utf16Col":14}},"extentUtf16":{"start":{"lineNumber":44,"utf16Col":0},"end":{"lineNumber":87,"utf16Col":0}}},{"name":" Model testing","kind":"unknown","identStart":3351,"identEnd":3365,"extentStart":3348,"extentEnd":3878,"fullyQualifiedName":" Model testing","identUtf16":{"start":{"lineNumber":87,"utf16Col":3},"end":{"lineNumber":87,"utf16Col":17}},"extentUtf16":{"start":{"lineNumber":87,"utf16Col":0},"end":{"lineNumber":100,"utf16Col":0}}},{"name":" System messages","kind":"unknown","identStart":3881,"identEnd":3897,"extentStart":3878,"extentEnd":5552,"fullyQualifiedName":" System messages","identUtf16":{"start":{"lineNumber":100,"utf16Col":3},"end":{"lineNumber":100,"utf16Col":19}},"extentUtf16":{"start":{"lineNumber":100,"utf16Col":0},"end":{"lineNumber":138,"utf16Col":0}}},{"name":" Evaluation report","kind":"unknown","identStart":5555,"identEnd":5573,"extentStart":5552,"extentEnd":5924,"fullyQualifiedName":" Evaluation report","identUtf16":{"start":{"lineNumber":138,"utf16Col":3},"end":{"lineNumber":138,"utf16Col":21}},"extentUtf16":{"start":{"lineNumber":138,"utf16Col":0},"end":{"lineNumber":144,"utf16Col":0}}},{"name":" Parameters","kind":"unknown","identStart":5927,"identEnd":5938,"extentStart":5924,"extentEnd":6811,"fullyQualifiedName":" Parameters","identUtf16":{"start":{"lineNumber":144,"utf16Col":3},"end":{"lineNumber":144,"utf16Col":14}},"extentUtf16":{"start":{"lineNumber":144,"utf16Col":0},"end":{"lineNumber":163,"utf16Col":0}}},{"name":" Required","kind":"unknown","identStart":6003,"identEnd":6012,"extentStart":5999,"extentEnd":6073,"fullyQualifiedName":" Required","identUtf16":{"start":{"lineNumber":148,"utf16Col":4},"end":{"lineNumber":148,"utf16Col":13}},"extentUtf16":{"start":{"lineNumber":148,"utf16Col":0},"end":{"lineNumber":152,"utf16Col":0}}},{"name":" Optional","kind":"unknown","identStart":6077,"identEnd":6086,"extentStart":6073,"extentEnd":6811,"fullyQualifiedName":" Optional","identUtf16":{"start":{"lineNumber":152,"utf16Col":4},"end":{"lineNumber":152,"utf16Col":13}},"extentUtf16":{"start":{"lineNumber":152,"utf16Col":0},"end":{"lineNumber":163,"utf16Col":0}}},{"name":" Loading and adding","kind":"unknown","identStart":6814,"identEnd":6833,"extentStart":6811,"extentEnd":8932,"fullyQualifiedName":" Loading and adding","identUtf16":{"start":{"lineNumber":163,"utf16Col":3},"end":{"lineNumber":163,"utf16Col":22}},"extentUtf16":{"start":{"lineNumber":163,"utf16Col":0},"end":{"lineNumber":218,"utf16Col":0}}},{"name":" Thumb Testing üëçüß™","kind":"unknown","identStart":8934,"identEnd":8957,"extentStart":8932,"extentEnd":10422,"fullyQualifiedName":" Thumb Testing üëçüß™","identUtf16":{"start":{"lineNumber":218,"utf16Col":2},"end":{"lineNumber":218,"utf16Col":21}},"extentUtf16":{"start":{"lineNumber":218,"utf16Col":0},"end":{"lineNumber":231,"utf16Col":0}}},{"name":" Contributors","kind":"unknown","identStart":10424,"identEnd":10437,"extentStart":10422,"extentEnd":11072,"fullyQualifiedName":" Contributors","identUtf16":{"start":{"lineNumber":231,"utf16Col":2},"end":{"lineNumber":231,"utf16Col":15}},"extentUtf16":{"start":{"lineNumber":231,"utf16Col":0},"end":{"lineNumber":249,"utf16Col":0}}}]}},"copilotInfo":null,"csrf_tokens":{"/hammer-mt/thumb/branches":{"post":"TRTjUHJmFQ6WAEPyR6qTBxf_QhiFHT3AsrK40kFvgVOVgZj_dN9d1Bsnai4UhywVe9RgoURKeG1LTWACgs3e5g"},"/repos/preferences":{"post":"WfBW3dZjct4W-XBHQ-ggm87Hj6tb33h5pGwpxXWcUmbPxHFiPY85UJ48bT4Xi1wgaazAyuHPfr9xFrQjDQ-uRg"}}},"title":"thumb/README.md at master ¬∑ hammer-mt/thumb"}